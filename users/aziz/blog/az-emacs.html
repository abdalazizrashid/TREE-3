<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2024-07-17 Wed 03:58 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GNU emacs literate configuration</title>
<meta name="author" content="Abdalaziz (Aziz) R. A.M." />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="style.css" />
<script>
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
// @license-end
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">GNU emacs literate configuration</h1>
<p>
<b>Last revised and exported on 2024-07-17 03:58:09 +0300 with a word
count of 7390.</b>
</p>
<div id="outline-container-orgae8ad8d" class="outline-2">
<h2 id="orgae8ad8d"><span class="section-number-2">1.</span> Early init configurations</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Set it to big number(100mb) like most of the popular starter kits</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">like Spacemacs/Doom/Prelude, etc do: Follow the method recommended</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">by Gnu Emacs Maintainer Eli Zaretskii: "My suggestion is to</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">repeatedly multiply gc-cons-threshold by 2 until you stop seeing</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">significant improvements in responsiveness, and in any case not to</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">increase by a factor larger than 100 or somesuch. If even a</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">100-fold increase doesn't help, there's some deeper problem with</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">the Lisp code which produces so much garbage, or maybe GC is not</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">the reason for slowdown." Source:</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;"><a href="https://www.reddit.com/r/emacs/comments/brc05y/is_lspmode_too_slow_to_use_for_anyone_else/eofulix/">&lt;https://www.reddit.com/r/emacs/comments/brc05y/is_lspmode_too_slow_to_use_for_anyone_else/eofulix/&gt;</a></span>

(<span style="color: #531ab6;">setq</span> gc-cons-threshold 100000000)

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Increase the amount of data which Emacs reads from the process#</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Again the emacs default is too low 4k considering that the some of</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">the language server responses are in 800k - 3M range.</span>
(<span style="color: #531ab6;">setq</span> read-process-output-max (* 1024 1024)) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">1mb</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">plists provide better performance in deserialization and also put</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">less presure than hash-tables</span>
(setenv <span style="color: #3548cf;">"LSP_USE_PLISTS"</span> <span style="color: #3548cf;">"true"</span>)

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Disable the tool bar</span>
(tool-bar-mode -1)
(menu-bar-mode 1)
(toggle-scroll-bar -1) 
(scroll-bar-mode -1)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">setq</span> frame-resize-pixelwise t
      frame-inhibit-implied-resize t
      frame-title-format '(<span style="color: #3548cf;">"%b"</span>)
      ring-bell-function 'ignore
      use-dialog-box t <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">only for mouse events, which I seldom use</span>
      use-file-dialog nil
      use-short-answers t
      inhibit-splash-screen t
      inhibit-startup-screen t
      inhibit-x-resources t
      inhibit-startup-echo-area-message user-login-name <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">read the docstring</span>
      inhibit-startup-buffer-menu t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org51c6747" class="outline-2">
<h2 id="org51c6747"><span class="section-number-2">2.</span> Main emacs configs</h2>
<div class="outline-text-2" id="text-2">
<p>
Packages customizations are defined here
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Garbage collect after startup</span>
(add-hook 'after-init-hook #'garbage-collect t)
(<span style="color: #531ab6;">defvar</span> <span style="color: #005e8b;">bootstrap-version</span>)
(<span style="color: #531ab6;">let</span> ((bootstrap-file
         (expand-file-name
          <span style="color: #3548cf;">"straight/repos/straight.el/bootstrap.el"</span>
          (<span style="color: #531ab6;">or</span> (<span style="color: #531ab6;">bound-and-true-p</span> straight-base-dir)
              user-emacs-directory)))
        (bootstrap-version 7))
  (<span style="color: #531ab6;">unless</span> (file-exists-p bootstrap-file)
    (<span style="color: #531ab6;">with-current-buffer</span>
          (url-retrieve-synchronously
           <span style="color: #3548cf;">"https://raw.githubusercontent.com/radian-software/straight.el/develop/install.el"</span>
           'silent 'inhibit-cookies)
        (goto-char (point-max))
        (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))


(straight-use-package 'use-package)
(<span style="color: #531ab6;">setq</span> straight-use-package-by-default t)
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:config</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;; Setup a personal keymap. I'll bind various things to this later on:</span>
(<span style="color: #531ab6;">bind-keys</span> <span style="color: #8f0075;">:prefix</span> <span style="color: #3548cf;">"&lt;f1&gt;"</span>
             <span style="color: #8f0075;">:prefix-map</span> my/map)
(<span style="color: #531ab6;">setq</span> use-package-enable-imenu-support t
        use-package-compute-statistics t)
(straight-use-package 'org)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">modus-themes</span>
  <span style="color: #8f0075;">:init</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Add all your customizations prior to loading the themes</span>
  (<span style="color: #531ab6;">setq</span> modus-themes-italic-constructs t
        modus-themes-bold-constructs t
        modus-themes-region '(bg-only)
        modus-themes-to-toggle '(modus-operandi-tinted modus-vivendi))
  (<span style="color: #531ab6;">setq</span> modus-themes-custom-auto-reload nil
        modus-themes-to-toggle '(modus-operandi modus-vivendi)
        <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">modus-themes-to-toggle '(modus-operandi-tinted modus-vivendi-tinted)</span>
        <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">modus-themes-to-toggle '(modus-operandi-deuteranopia modus-vivendi-deuteranopia)</span>
        <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">modus-themes-to-toggle '(modus-operandi-tritanopia modus-vivendi-tritanopia)</span>
        modus-themes-mixed-fonts t
        modus-themes-variable-pitch-ui t
        modus-themes-italic-constructs t
        modus-themes-bold-constructs nil
        modus-themes-org-blocks nil
        modus-themes-completions '((t . (extrabold)))
        modus-themes-prompts '(extrabold)
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">   modus-themes-headings</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">   '((agenda-structure . (variable-pitch light 2.2))</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(agenda-date . (variable-pitch regular 1.3))</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(t . (regular 1.15))))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq </span>
   modus-themes-common-palette-overrides nil
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">'((bg-mode-line-active bg-cyan-subtle)</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(keybind yellow-warmer))</span>
         )


  <span style="color: #8f0075;">:bind</span> (<span style="color: #3548cf;">"&lt;f5&gt;"</span> . modus-themes-toggle)

  <span style="color: #8f0075;">:config</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Load the theme of your choice:</span>
  (load-theme 'modus-operandi-tinted <span style="color: #8f0075;">:no-confirm</span>)
  (modus-themes-select 'modus-operandi-tinted)
  )
</pre>
</div>

<p>
Emacs configurations
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Using `use-package` to configure emacs, here emacs is a pseudo</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">package</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">emacs</span>
  <span style="color: #8f0075;">:bind*</span> (
          (<span style="color: #3548cf;">"M-o"</span> . ace-window)
          (<span style="color: #3548cf;">"C-x &lt;C-m&gt;"</span> . execute-extended-command)
          (<span style="color: #3548cf;">"C-c &lt;C-m&gt;"</span> . execute-extended-command) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Sloppy version</span>
          (<span style="color: #3548cf;">"C-h h"</span> . nil) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Disable the hello page</span>
          )

  <span style="color: #8f0075;">:custom</span>
  (user-full-name <span style="color: #3548cf;">"A.R.M"</span>)


  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Settings for the Cocoa port</span>
  (ns-alternate-modifier 'super)
  (ns-command-modifier 'meta)
  (ns-function-modifier 'hyper)
  (ns-right-alternate-modifier 'super)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Settings for the Emacs Mac-port</span>
  (mac-command-modifier 'meta)
  (mac-option-modifier 'super)
  (mac-pass-command-to-system nil)

  (frame-title-format
   '(<span style="color: #8f0075;">:eval</span>
     (concat
      (<span style="color: #531ab6;">if</span> buffer-file-name default-directory <span style="color: #3548cf;">"%b"</span>)
      <span style="color: #3548cf;">"    "</span>
      (number-to-string
       (cdr
        (assq 'width
              (frame-parameters))))
      <span style="color: #3548cf;">"x"</span>
      (number-to-string
       (cdr
        (assq 'height
              (frame-parameters)))))))

  (completion-cycle-threshold 7)
  (completion-ignored-extensions
   '(<span style="color: #3548cf;">".a"</span>
     <span style="color: #3548cf;">".aux"</span>
     <span style="color: #3548cf;">".bbl"</span>
     <span style="color: #3548cf;">".bin"</span>
     <span style="color: #3548cf;">".elc"</span>
     <span style="color: #3548cf;">".git/"</span>
     <span style="color: #3548cf;">".o"</span>
     <span style="color: #3548cf;">".pyc"</span>
     <span style="color: #3548cf;">".pyo"</span>
     <span style="color: #3548cf;">".so"</span>
     <span style="color: #3548cf;">".toc"</span>
     <span style="color: #3548cf;">"~"</span>))

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">startup.el</span>
  (auto-save-list-file-prefix (user-data <span style="color: #3548cf;">"auto-save-list/.saves-"</span>))
  (inhibit-startup-echo-area-message <span style="color: #3548cf;">"aziz"</span>)
  (inhibit-startup-screen t)
  (initial-buffer-choice t)
  (initial-major-mode 'fundamental-mode)
  (initial-scratch-message <span style="color: #3548cf;">""</span>)
  (user-mail-address <span style="color: #3548cf;">"abdalaziz.rashid@outlook.com"</span>)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">files.el</span>
  (auto-save-file-name-transforms '((<span style="color: #3548cf;">"\\`/[</span><span style="color: #a60000;">^</span><span style="color: #3548cf;">/]*:.*"</span> <span style="color: #3548cf;">"~/.emacs.d/auto-saves/"</span> t)))
  (backup-directory-alist '((<span style="color: #3548cf;">"."</span> . <span style="color: #3548cf;">"~/.local/share/emacs/backups"</span>)))
  (delete-old-versions t)
  (directory-abbrev-alist
   '((<span style="color: #3548cf;">"\\`/org"</span> . <span style="color: #3548cf;">"~/org"</span>)
     (<span style="color: #3548cf;">"\\`/home-manager"</span> . <span style="color: #3548cf;">"~/.config/home-manager"</span>)))
  (directory-free-space-args <span style="color: #3548cf;">"-kh"</span>)
  (large-file-warning-threshold nil)
  (save-abbrevs 'silently)
  (trash-directory <span style="color: #3548cf;">"~/.Trash"</span>)
  (version-control t)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">bytecomp.el</span>
  (byte-compile-verbose nil)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">scroll-bar.el</span>
  (scroll-bar-mode nil)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">paren.el</span>
  (show-paren-delay 0)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">window.el</span>
  (same-window-buffer-names
   '(<span style="color: #3548cf;">"*eshell*"</span>
     <span style="color: #3548cf;">"*shell*"</span>
     <span style="color: #3548cf;">"*mail*"</span>
     <span style="color: #3548cf;">"*inferior-lisp*"</span>
     <span style="color: #3548cf;">"*ielm*"</span>
     <span style="color: #3548cf;">"*scheme*"</span>))
  (switch-to-buffer-preserve-window-point t)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">warnings.el</span>
  (warning-minimum-log-level <span style="color: #8f0075;">:error</span>)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">frame.el</span>
  (window-divider-default-bottom-width 1)
  (window-divider-default-places 'bottom-only)
  (add-to-list 'default-frame-alist '(fullscreen . maximized))


  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">mwheel.el</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">TODO: disable keybindings to  mouse-wheel-global-text-scale</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">and mouse-wheel-text-scale</span>
  (global-set-key (kbd <span style="color: #3548cf;">"&lt;C-wheel-up&gt;"</span>) nil)
  (global-set-key (kbd <span style="color: #3548cf;">"&lt;C-wheel-down&gt;"</span>) nil)

  (vc-follow-symlinks nil)
  <span style="color: #8f0075;">:init</span>
  (<span style="color: #531ab6;">setq</span> disabled-command-function nil) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">enable all commands</span>


  <span style="color: #8f0075;">:config</span>  
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Setup font</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(advice-add 'server-create-window-system-frame</span>
  <span style="color: #595959; font-style: italic;">;;              </span><span style="color: #595959; font-style: italic;">:after 'my/setup-fonts)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(advice-add 'server-create-tty-frame</span>
  <span style="color: #595959; font-style: italic;">;;              </span><span style="color: #595959; font-style: italic;">:after 'my/setup-fonts)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(unless (daemonp) (my/setup-fonts))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;; En</span>
  able line numbers only with programing modes
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-hook 'prog-mode-hook (lambda () (</span>
  <span style="color: #595959; font-style: italic;">;;           </span><span style="color: #595959; font-style: italic;">display-line-numbers-mode</span>
  <span style="color: #595959; font-style: italic;">;;           </span><span style="color: #595959; font-style: italic;">(setq-default display-line-numbers-type 'relative))))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">This is an ugly hack the fix is upstream but hasn't been merge yet</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">https://github.com/doomemacs/doomemacs/issues/7532</span>
  (add-hook 'after-init-hook (<span style="color: #531ab6;">lambda</span> () 
                             (tool-bar-mode 1) 
                             (tool-bar-mode 0)))
  (<span style="color: #531ab6;">defun</span> <span style="color: #721045;">my-toggle-toolbar</span> (frame)
    <span style="color: #2a5045; font-style: italic;">"Toggle tool-bar-mode on then off when a new frame is created."</span>
    (<span style="color: #531ab6;">with-selected-frame</span> frame
      (tool-bar-mode 1)
      (tool-bar-mode 0)))

  (add-hook 'after-make-frame-functions 'my-toggle-toolbar)
  )
</pre>
</div>
</div>
<div id="outline-container-org3865e1f" class="outline-3">
<h3 id="org3865e1f"><span class="section-number-3">2.1.</span> String processing</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">s</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb9a3226" class="outline-3">
<h3 id="orgb9a3226"><span class="section-number-3">2.2.</span> Asyn</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Used by other packages such as org-ref
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">async</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org52c2b62" class="outline-3">
<h3 id="org52c2b62"><span class="section-number-3">2.3.</span> Tramp</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Tramp</span>
<span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">https://www.gnu.org/software/emacs/manual/html_node/tramp/Ssh-setup.html</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">tramp</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">setq</span> tramp-ssh-controlmaster-options
        (concat
         <span style="color: #3548cf;">"-o ControlMaster=auto "</span>
         <span style="color: #3548cf;">"-o ControlPath=~/tmp/.ssh-control-%%r-%%h-%%p"</span>))
  (tramp-set-completion-function
   <span style="color: #3548cf;">"ssh"</span> (append (tramp-get-completion-function <span style="color: #3548cf;">"ssh"</span>)
                 (mapcar (<span style="color: #531ab6;">lambda</span> (file) `(tramp-parse-sconfig ,file))
                         (directory-files
                          <span style="color: #3548cf;">"~/.ssh/conf.d/"</span>
                          'full directory-files-no-dot-files-regexp))))

  (<span style="color: #531ab6;">setq</span> tramp-default-method <span style="color: #3548cf;">"ssh"</span>)
  (add-hook 'helm-tramp-pre-command-hook '(lambda () (global-aggressive-indent-mode 0)
                                            (projectile-mode 0)
                                            <span style="color: #595959; font-style: italic;">;;</span><span style="color: #595959; font-style: italic;">(editorconfig-mode 0)</span>
                                            ))
  (add-hook 'helm-tramp-quit-hook '(lambda () (global-aggressive-indent-mode 1)
                                     (projectile-mode 1)
                                     <span style="color: #595959; font-style: italic;">;;</span><span style="color: #595959; font-style: italic;">(editorconfig-mode 1)</span>
                                     ))
  (<span style="color: #531ab6;">setq</span> make-backup-files nil)
  (<span style="color: #531ab6;">setq</span> create-lockfiles nil)
  <span style="color: #8f0075;">:custom</span>
  (custom-set-variables  '(tramp-remote-path
                           (<span style="color: #531ab6;">quote</span>
                            (tramp-own-remote-path))))
  (debug-ignored-errors
   (cons 'remote-file-error debug-ignored-errors))
  (tramp-lock-file-name-transforms
   '((<span style="color: #3548cf;">"\\`</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">.+</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">\\'"</span> <span style="color: #3548cf;">"\\1~"</span>))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgb2f6885" class="outline-2">
<h2 id="orgb2f6885"><span class="section-number-2">3.</span> Font configuration</h2>
<div class="outline-text-2" id="text-3">
<p>
I use <code>fontaine</code> a package allows the user to define detailed font
configurations and set them on demand. For example, one can have a
regular-editing preset and another for presentation-mode (these are
arbitrary, user-defined symbols): the former uses small fonts which
are optimised for writing, while the latter applies typefaces that are
pleasant to read at comfortable point sizes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">fontaine</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">setq</span> fontaine-presets
        '((small
           <span style="color: #8f0075;">:default-family</span> <span style="color: #3548cf;">"Berkeley Mono"</span>
           <span style="color: #8f0075;">:default-height</span> 80
           <span style="color: #8f0075;">:variable-pitch-family</span> <span style="color: #3548cf;">"Berkeley Mono"</span>)
          (regular) <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">like this it uses all the fallback values and is named `</span><span style="color: #0000b0; font-style: italic;">regular</span><span style="color: #595959; font-style: italic;">'</span>
          (medium
           <span style="color: #8f0075;">:default-weight</span> semilight
           <span style="color: #8f0075;">:default-height</span> 115
           <span style="color: #8f0075;">:bold-weight</span> extrabold)
          (large
           <span style="color: #8f0075;">:inherit</span> medium
           <span style="color: #8f0075;">:default-height</span> 150)
          (presentation
           <span style="color: #8f0075;">:inherit</span> medium
           <span style="color: #8f0075;">:default-weight</span> light
           <span style="color: #8f0075;">:default-height</span> 180)
          (t
           <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">I keep all properties for didactic purposes, but most can be</span>
           <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">omitted.  See the fontaine manual for the technicalities:</span>
           <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;"><a href="https://protesilaos.com/emacs/fontaine">&lt;https://protesilaos.com/emacs/fontaine&gt;</a>.</span>
           <span style="color: #8f0075;">:default-family</span> <span style="color: #3548cf;">"Berkeley Mono"</span>
           <span style="color: #8f0075;">:default-weight</span> regular
           <span style="color: #8f0075;">:default-height</span> 100
           <span style="color: #8f0075;">:fixed-pitch-family</span> nil <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">falls back to :default-family</span>
           <span style="color: #8f0075;">:fixed-pitch-weight</span> nil <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">falls back to :default-weight</span>
           <span style="color: #8f0075;">:fixed-pitch-height</span> 1.0
           <span style="color: #8f0075;">:fixed-pitch-serif-family</span> nil <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">falls back to :default-family</span>
           <span style="color: #8f0075;">:fixed-pitch-serif-weight</span> nil <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">falls back to :default-weight</span>
           <span style="color: #8f0075;">:fixed-pitch-serif-height</span> 1.0
           <span style="color: #8f0075;">:variable-pitch-family</span> <span style="color: #3548cf;">"Berkeley Mono"</span>
           <span style="color: #8f0075;">:variable-pitch-weight</span> nil
           <span style="color: #8f0075;">:variable-pitch-height</span> 1.0
           <span style="color: #8f0075;">:bold-family</span> nil <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">use whatever the underlying face has</span>
           <span style="color: #8f0075;">:bold-weight</span> bold
           <span style="color: #8f0075;">:italic-family</span> nil
           <span style="color: #8f0075;">:italic-slant</span> italic
           <span style="color: #8f0075;">:line-spacing</span> nil)))

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Set last preset or fall back to desired style from `</span><span style="color: #0000b0; font-style: italic;">fontaine-presets</span><span style="color: #595959; font-style: italic;">'.</span>
  (fontaine-set-preset (<span style="color: #531ab6;">or</span> (fontaine-restore-latest-preset) 'regular))

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">The other side of `</span><span style="color: #0000b0; font-style: italic;">fontaine-restore-latest-preset</span><span style="color: #595959; font-style: italic;">'.</span>
  (add-hook 'kill-emacs-hook #'fontaine-store-latest-preset)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Persist font configurations while switching themes.  The</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">`</span><span style="color: #0000b0; font-style: italic;">enable-theme-functions</span><span style="color: #595959; font-style: italic;">' is from Emacs 29.</span>
  (add-hook 'enable-theme-functions #'fontaine-apply-current-preset)

)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga9564e5" class="outline-2">
<h2 id="orga9564e5"><span class="section-number-2">4.</span> Completion</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org6edc700" class="outline-3">
<h3 id="org6edc700"><span class="section-number-3">4.1.</span> vetico</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Enable vertico</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">vertico</span>
  <span style="color: #8f0075;">:init</span>
  (vertico-mode)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Different scroll margin</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq vertico-scroll-margin 0)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Show more candidates</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq vertico-count 20)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Grow and shrink the Vertico minibuffer</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq vertico-resize t)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally enable cycling for `</span><span style="color: #0000b0; font-style: italic;">vertico-next</span><span style="color: #595959; font-style: italic;">' and `</span><span style="color: #0000b0; font-style: italic;">vertico-previous</span><span style="color: #595959; font-style: italic;">'.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq vertico-cycle t)</span>
  )

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Persist history over Emacs restarts. Vertico sorts by history position.</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">savehist</span>
  <span style="color: #8f0075;">:init</span>
  (savehist-mode))

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">A few more useful configurations...</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">emacs</span>
  <span style="color: #8f0075;">:init</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Add prompt indicator to `</span><span style="color: #0000b0; font-style: italic;">completing-read-multiple</span><span style="color: #595959; font-style: italic;">'.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">We display [CRM&lt;separator&gt;], e.g., [CRM,] if the separator is a comma.</span>
  (<span style="color: #531ab6;">defun</span> <span style="color: #721045;">crm-indicator</span> (args)
    (cons (format <span style="color: #3548cf;">"[CRM%s] %s"</span>
                  (replace-regexp-in-string
                   <span style="color: #3548cf;">"\\`\\[</span><span style="color: #0000b0;">.*?</span><span style="color: #3548cf;">]\\*</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">\\[</span><span style="color: #0000b0;">.*?</span><span style="color: #3548cf;">]\\*\\'"</span> <span style="color: #3548cf;">""</span>
                   crm-separator)
                  (car args))
          (cdr args)))
  (advice-add #'completing-read-multiple <span style="color: #8f0075;">:filter-args</span> #'crm-indicator)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Do not allow the cursor in the minibuffer prompt</span>
  (<span style="color: #531ab6;">setq</span> minibuffer-prompt-properties
        '(read-only t cursor-intangible t face minibuffer-prompt))
  (add-hook 'minibuffer-setup-hook #'cursor-intangible-mode)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Support opening new minibuffers from inside existing minibuffers.</span>
  (<span style="color: #531ab6;">setq</span> enable-recursive-minibuffers t)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Emacs 28 and newer: Hide commands in M-x which do not work in the current</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">mode.  Vertico commands are hidden in normal buffers. This setting is</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">useful beyond Vertico.</span>
  (<span style="color: #531ab6;">setq</span> read-extended-command-predicate #'command-completion-default-include-p))
</pre>
</div>
</div>
</div>
<div id="outline-container-org34cee77" class="outline-3">
<h3 id="org34cee77"><span class="section-number-3">4.2.</span> corfu</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Corfu enhances in-buffer completion with a small completion popup. The
current candidates are shown in a popup below or above the point. The
candidates can be selected by moving up and down. Corfu is the
minimalistic in-buffer completion counterpart of the Vertico
minibuffer UI. 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">corfu</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optional customizations</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:custom</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-cycle t)                ;; Enable cycling for `</span><span style="color: #0000b0; font-style: italic;">corfu-next/previous</span><span style="color: #595959; font-style: italic;">'</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-auto t)                 ;; Enable auto completion</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-separator ?\s)          ;; Orderless field separator</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-quit-at-boundary nil)   ;; Never quit at completion boundary</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-quit-no-match nil)      ;; Never quit, even if there is no match</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-preview-current nil)    ;; Disable current candidate preview</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-preselect 'prompt)      ;; Preselect the prompt</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-on-exact-match nil)     ;; Configure handling of exact matches</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(corfu-scroll-margin 5)        ;; Use scroll margin</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Enable Corfu only for certain modes.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:hook ((prog-mode . corfu-mode)</span>
  <span style="color: #595959; font-style: italic;">;;        </span><span style="color: #595959; font-style: italic;">(shell-mode . corfu-mode)</span>
  <span style="color: #595959; font-style: italic;">;;        </span><span style="color: #595959; font-style: italic;">(eshell-mode . corfu-mode))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Recommended: Enable Corfu globally.  This is recommended since Dabbrev can</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">be used globally (M-/).  See also the customization variable</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">`</span><span style="color: #0000b0; font-style: italic;">global-corfu-modes</span><span style="color: #595959; font-style: italic;">' to exclude certain modes.</span>
  <span style="color: #8f0075;">:init</span>
  (global-corfu-mode))

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">A few more useful configurations...</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">emacs</span>
  <span style="color: #8f0075;">:init</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">TAB cycle if there are only few candidates</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq completion-cycle-threshold 3)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Enable indentation+completion using the TAB key.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">`</span><span style="color: #0000b0; font-style: italic;">completion-at-point</span><span style="color: #595959; font-style: italic;">' is often bound to M-TAB.</span>
  (<span style="color: #531ab6;">setq</span> tab-always-indent 'complete)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Emacs 30 and newer: Disable Ispell completion function. As an alternative,</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">try `</span><span style="color: #0000b0; font-style: italic;">cape-dict</span><span style="color: #595959; font-style: italic;">'.</span>
  (<span style="color: #531ab6;">setq</span> text-mode-ispell-word-completion nil)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Emacs 28 and newer: Hide commands in M-x which do not apply to the current</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">mode.  Corfu commands are hidden, since they are not used via M-x. This</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">setting is useful beyond Corfu.</span>
  (<span style="color: #531ab6;">setq</span> read-extended-command-predicate #'command-completion-default-include-p))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgbe58c29" class="outline-3">
<h3 id="orgbe58c29"><span class="section-number-3">4.3.</span> orderless</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">Orderless</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">orderless</span>
  <span style="color: #8f0075;">:init</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Configure a custom style dispatcher (see the Consult wiki)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq orderless-style-dispatchers '(+orderless-consult-dispatch orderless-affix-dispatch)</span>
  <span style="color: #595959; font-style: italic;">;;       </span><span style="color: #595959; font-style: italic;">orderless-component-separator #'orderless-escapable-split-on-space)</span>
  (<span style="color: #531ab6;">setq</span> completion-styles '(orderless basic)
        completion-category-defaults nil
        completion-category-overrides '((file (styles partial-completion))))
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">defun</span> <span style="color: #721045;">prefixes-for-separators</span> (pattern _index _total)
    (<span style="color: #531ab6;">when</span> (string-match-p <span style="color: #3548cf;">"^[</span><span style="color: #a60000;">^</span><span style="color: #3548cf;">][</span><span style="color: #a60000;">^</span><span style="color: #3548cf;">\\+*]*[./-][</span><span style="color: #a60000;">^</span><span style="color: #3548cf;">][\\+*$]*$"</span> pattern)
      (cons 'orderless-prefixes pattern)))
  (<span style="color: #531ab6;">cl-pushnew</span> '(?` . orderless-regexp) orderless-affix-dispatch-alist)
  <span style="color: #8f0075;">:custom</span>
  (orderless-style-dispatchers
   '(orderless-affix-dispatch prefixes-for-separators))
  )

</pre>
</div>
</div>
</div>
<div id="outline-container-orge40f847" class="outline-3">
<h3 id="orge40f847"><span class="section-number-3">4.4.</span> embark</h3>
<div class="outline-text-3" id="text-4-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">embark</span>
  <span style="color: #8f0075;">:bind</span>
  ((<span style="color: #3548cf;">"C-."</span> . embark-act)         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">pick some comfortable binding</span>
   (<span style="color: #3548cf;">"C-;"</span> . embark-dwim)        <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">good alternative: M-.</span>
   (<span style="color: #3548cf;">"C-h B"</span> . embark-bindings)) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">alternative for `</span><span style="color: #0000b0; font-style: italic;">describe-bindings</span><span style="color: #595959; font-style: italic;">'</span>

  <span style="color: #8f0075;">:init</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally replace the key help with a completing-read interface</span>
  (<span style="color: #531ab6;">setq</span> prefix-help-command #'embark-prefix-help-command)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Show the Embark target at point via Eldoc. You may adjust the</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Eldoc strategy, if you want to see the documentation from</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">multiple providers. Beware that using this can be a little</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">jarring since the message shown in the minibuffer can be more</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">than one line, causing the modeline to move up and down:</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-hook 'eldoc-documentation-functions #'embark-eldoc-first-target)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq eldoc-documentation-strategy #'eldoc-documentation-compose-eagerly)</span>

  <span style="color: #8f0075;">:config</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Hide the mode line of the Embark live/completions buffers</span>
  (add-to-list 'display-buffer-alist
               '(<span style="color: #3548cf;">"\\`\\*Embark Collect </span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">Live</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">Completions</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">\\*"</span>
                 nil
                 (window-parameters (mode-line-format . none)))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orge25b7e6" class="outline-3">
<h3 id="orge25b7e6"><span class="section-number-3">4.5.</span> Marginalia</h3>
<div class="outline-text-3" id="text-4-5">
<p>
Enable rich annotations using the Marginalia package
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">marginalia</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Bind `</span><span style="color: #0000b0; font-style: italic;">marginalia-cycle</span><span style="color: #595959; font-style: italic;">' locally in the minibuffer.  To make the binding</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">available in the *Completions* buffer, add it to the</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">`</span><span style="color: #0000b0; font-style: italic;">completion-list-mode-map</span><span style="color: #595959; font-style: italic;">'.</span>
  <span style="color: #8f0075;">:bind</span> (<span style="color: #8f0075;">:map</span> minibuffer-local-map
         (<span style="color: #3548cf;">"M-A"</span> . marginalia-cycle))

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">The :init section is always executed.</span>
  <span style="color: #8f0075;">:init</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Marginalia must be activated in the :init section of use-package such that</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">the mode gets enabled right away. Note that this forces loading the</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">package.</span>
  (marginalia-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ab5da5" class="outline-3">
<h3 id="org0ab5da5"><span class="section-number-3">4.6.</span> <span class="todo TODO">TODO</span> ivy</h3>
</div>
<div id="outline-container-orge7ad08b" class="outline-3">
<h3 id="orge7ad08b"><span class="section-number-3">4.7.</span> consult</h3>
<div class="outline-text-3" id="text-4-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Example configuration for Consult</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">consult</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Replace bindings. Lazily loaded due by `</span><span style="color: #0000b0; font-style: italic;">use-package</span><span style="color: #595959; font-style: italic;">'.</span>
  <span style="color: #8f0075;">:bind</span> (<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">C-c bindings in `</span><span style="color: #0000b0; font-style: italic;">mode-specific-map</span><span style="color: #595959; font-style: italic;">'</span>
         (<span style="color: #3548cf;">"C-c M-x"</span> . consult-mode-command)
         (<span style="color: #3548cf;">"C-c h"</span> . consult-history)
         (<span style="color: #3548cf;">"C-c k"</span> . consult-kmacro)
         (<span style="color: #3548cf;">"C-c m"</span> . consult-man)
         (<span style="color: #3548cf;">"C-c i"</span> . consult-info)
         ([remap Info-search] . consult-info)
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">C-x bindings in `</span><span style="color: #0000b0; font-style: italic;">ctl-x-map</span><span style="color: #595959; font-style: italic;">'</span>
         (<span style="color: #3548cf;">"C-x M-:"</span> . consult-complex-command)     <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. repeat-complex-command</span>
         (<span style="color: #3548cf;">"C-x b"</span> . consult-buffer)                <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. switch-to-buffer</span>
         (<span style="color: #3548cf;">"C-x 4 b"</span> . consult-buffer-other-window) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. switch-to-buffer-other-window</span>
         (<span style="color: #3548cf;">"C-x 5 b"</span> . consult-buffer-other-frame)  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. switch-to-buffer-other-frame</span>
         (<span style="color: #3548cf;">"C-x t b"</span> . consult-buffer-other-tab)    <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. switch-to-buffer-other-tab</span>
         (<span style="color: #3548cf;">"C-x r b"</span> . consult-bookmark)            <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. bookmark-jump</span>
         (<span style="color: #3548cf;">"C-x p b"</span> . consult-project-buffer)      <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. project-switch-to-buffer</span>
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Custom M-# bindings for fast register access</span>
         (<span style="color: #3548cf;">"M-#"</span> . consult-register-load)
         (<span style="color: #3548cf;">"M-'"</span> . consult-register-store)          <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. abbrev-prefix-mark (unrelated)</span>
         (<span style="color: #3548cf;">"C-M-#"</span> . consult-register)
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Other custom bindings</span>
         (<span style="color: #3548cf;">"M-y"</span> . consult-yank-pop)                <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. yank-pop</span>
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">M-g bindings in `</span><span style="color: #0000b0; font-style: italic;">goto-map</span><span style="color: #595959; font-style: italic;">'</span>
         (<span style="color: #3548cf;">"M-g e"</span> . consult-compile-error)
         (<span style="color: #3548cf;">"M-g f"</span> . consult-flymake)               <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Alternative: consult-flycheck</span>
         (<span style="color: #3548cf;">"M-g g"</span> . consult-goto-line)             <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. goto-line</span>
         (<span style="color: #3548cf;">"M-g M-g"</span> . consult-goto-line)           <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. goto-line</span>
         (<span style="color: #3548cf;">"M-g o"</span> . consult-outline)               <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Alternative: consult-org-heading</span>
         (<span style="color: #3548cf;">"M-g m"</span> . consult-mark)
         (<span style="color: #3548cf;">"M-g k"</span> . consult-global-mark)
         (<span style="color: #3548cf;">"M-g i"</span> . consult-imenu)
         (<span style="color: #3548cf;">"M-g I"</span> . consult-imenu-multi)
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">M-s bindings in `</span><span style="color: #0000b0; font-style: italic;">search-map</span><span style="color: #595959; font-style: italic;">'</span>
         (<span style="color: #3548cf;">"M-s d"</span> . consult-fd)                  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Alternative: consult-fd</span>
         (<span style="color: #3548cf;">"M-s c"</span> . consult-locate)
         (<span style="color: #3548cf;">"M-s g"</span> . consult-grep)
         (<span style="color: #3548cf;">"M-s G"</span> . consult-git-grep)
         (<span style="color: #3548cf;">"M-s r"</span> . consult-ripgrep)
         (<span style="color: #3548cf;">"M-s l"</span> . consult-line)
         (<span style="color: #3548cf;">"M-s L"</span> . consult-line-multi)
         (<span style="color: #3548cf;">"M-s k"</span> . consult-keep-lines)
         (<span style="color: #3548cf;">"M-s u"</span> . consult-focus-lines)
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Isearch integration</span>
         (<span style="color: #3548cf;">"M-s e"</span> . consult-isearch-history)
         <span style="color: #8f0075;">:map</span> isearch-mode-map
         (<span style="color: #3548cf;">"M-e"</span> . consult-isearch-history)         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. isearch-edit-string</span>
         (<span style="color: #3548cf;">"M-s e"</span> . consult-isearch-history)       <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. isearch-edit-string</span>
         (<span style="color: #3548cf;">"M-s l"</span> . consult-line)                  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">needed by consult-line to detect isearch</span>
         (<span style="color: #3548cf;">"M-s L"</span> . consult-line-multi)            <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">needed by consult-line to detect isearch</span>
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Minibuffer history</span>
         <span style="color: #8f0075;">:map</span> minibuffer-local-map
         (<span style="color: #3548cf;">"M-s"</span> . consult-history)                 <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. next-matching-history-element</span>
         (<span style="color: #3548cf;">"M-r"</span> . consult-history))                <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">orig. previous-matching-history-element</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Enable automatic preview at point in the *Completions* buffer. This is</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">relevant when you use the default completion UI.</span>
  <span style="color: #8f0075;">:hook</span> (completion-list-mode . consult-preview-at-point-mode)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">The :init configuration is always executed (Not lazy)</span>
  <span style="color: #8f0075;">:init</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally configure the register formatting. This improves the register</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">preview for `</span><span style="color: #0000b0; font-style: italic;">consult-register</span><span style="color: #595959; font-style: italic;">', `</span><span style="color: #0000b0; font-style: italic;">consult-register-load</span><span style="color: #595959; font-style: italic;">',</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">`</span><span style="color: #0000b0; font-style: italic;">consult-register-store</span><span style="color: #595959; font-style: italic;">' and the Emacs built-ins.</span>
  (<span style="color: #531ab6;">setq</span> register-preview-delay 0.5
        register-preview-function #'consult-register-format)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally tweak the register preview window.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">This adds thin lines, sorting and hides the mode line of the window.</span>
  (advice-add #'register-preview <span style="color: #8f0075;">:override</span> #'consult-register-window)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Use Consult to select xref locations with preview</span>
  (<span style="color: #531ab6;">setq</span> xref-show-xrefs-function #'consult-xref
        xref-show-definitions-function #'consult-xref)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Configure other variables and modes in the :config section,</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">after lazily loading the package.</span>
  <span style="color: #8f0075;">:config</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally configure preview. The default value</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">is 'any, such that any key triggers the preview.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-preview-key 'any)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-preview-key "M-.")</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-preview-key '("S-&lt;down&gt;" "S-&lt;up&gt;"))</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">For some commands and buffer sources it is useful to configure the</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:preview-key on a per-command basis using the `</span><span style="color: #0000b0; font-style: italic;">consult-customize</span><span style="color: #595959; font-style: italic;">' macro.</span>
  (<span style="color: #531ab6;">consult-customize</span>
   consult-theme <span style="color: #8f0075;">:preview-key</span> '(<span style="color: #8f0075;">:debounce</span> 0.2 any)
   consult-ripgrep consult-git-grep consult-grep
   consult-bookmark consult-recent-file consult-xref
   consult--source-bookmark consult--source-file-register
   consult--source-recent-file consult--source-project-recent-file
   <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:preview-key "M-."</span>
   <span style="color: #8f0075;">:preview-key</span> '(<span style="color: #8f0075;">:debounce</span> 0.4 any))

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally configure the narrowing key.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Both &lt; and C-+ work reasonably well.</span>
  (<span style="color: #531ab6;">setq</span> consult-narrow-key <span style="color: #3548cf;">"&lt;"</span>) <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">"C-+"</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally make narrowing help available in the minibuffer.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">You may want to use `</span><span style="color: #0000b0; font-style: italic;">embark-prefix-help-command</span><span style="color: #595959; font-style: italic;">' or which-key instead.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(define-key consult-narrow-map (vconcat consult-narrow-key "?") #'consult-narrow-help)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">By default `</span><span style="color: #0000b0; font-style: italic;">consult-project-function</span><span style="color: #595959; font-style: italic;">' uses `</span><span style="color: #0000b0; font-style: italic;">project-root</span><span style="color: #595959; font-style: italic;">' from project.el.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Optionally configure a different project root function.</span>
  <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">1. project.el (the default)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-project-function #'consult--default-project--function)</span>
  <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">2. vc.el (vc-root-dir)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-project-function (lambda (_) (vc-root-dir)))</span>
  <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">3. locate-dominating-file</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-project-function (lambda (_) (locate-dominating-file "." ".git")))</span>
  <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">4. projectile.el (projectile-project-root)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(autoload 'projectile-project-root "projectile")</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-project-function (lambda (_) (projectile-project-root)))</span>
  <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">5. No project support</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq consult-project-function nil)</span>

  (add-to-list 'consult-fd-args <span style="color: #3548cf;">"--hidden"</span> t)
  (add-to-list 'consult-fd-args <span style="color: #3548cf;">"--exclude .git"</span> t)
  )

</pre>
</div>
<p>
The package embark-consult should be installed if you use both Embark and Consult
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">embark-consult</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-orga00864b" class="outline-3">
<h3 id="orga00864b"><span class="section-number-3">4.8.</span> Helm</h3>
<div class="outline-text-3" id="text-4-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">Helm</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">helm-rg</span>
<span style="color: #8f0075;">:straight</span> t)

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">helm-projectile</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:config</span>
  (helm-projectile-on))


(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">helm-tramp</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:config</span>
  (define-key global-map (kbd <span style="color: #3548cf;">"C-c s"</span>) 'helm-tramp))

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">helm-org-rifle</span>
   <span style="color: #8f0075;">:straight</span> t)

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">helm-bibtex</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:config</span>)

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">helm</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:demand</span> t
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">helm-source</span>)

  (global-set-key (kbd <span style="color: #3548cf;">"M-x"</span>) #'helm-M-x)
  (global-set-key (kbd <span style="color: #3548cf;">"C-x m"</span>) #'helm-M-x)
  (global-set-key (kbd <span style="color: #3548cf;">"C-c m"</span>) #'helm-M-x)
  (global-set-key (kbd <span style="color: #3548cf;">"C-x r b"</span>) #'helm-filtered-bookmarks)
  (global-set-key (kbd <span style="color: #3548cf;">"C-x C-f"</span>) #'helm-find-files)
  (global-set-key (kbd <span style="color: #3548cf;">"C-c i n"</span>) #'helm-complete-file-name-at-point)
  (global-set-key (kbd <span style="color: #3548cf;">"C-x i"</span>) #'helm-imenu)
  (global-set-key (kbd <span style="color: #3548cf;">"C-x b"</span>) 'helm-mini)
  (global-set-key (kbd <span style="color: #3548cf;">"C-h SPC"</span>) 'helm-all-mark-rings)
  (global-set-key (kbd <span style="color: #3548cf;">"C-c h x"</span>) 'helm-register)
  (global-set-key (kbd <span style="color: #3548cf;">"C-c h M-:"</span>) 'helm-eval-expression-with-eldoc)

  (<span style="color: #531ab6;">setq</span> helm-buffers-fuzzy-matching t
      helm-recentf-fuzzy-match    t)

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">The default "C-x c" is quite close to "C-x C-c", which quits Emacs.</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Changed to "C-c h". Note: We must set "C-c h" globally, because we</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">cannot change `</span><span style="color: #0000b0; font-style: italic;">helm-command-prefix-key</span><span style="color: #595959; font-style: italic;">' once `</span><span style="color: #0000b0; font-style: italic;">helm-config</span><span style="color: #595959; font-style: italic;">' is loaded.</span>
  (global-set-key (kbd <span style="color: #3548cf;">"C-c h"</span>) 'helm-command-prefix)
  (global-unset-key (kbd <span style="color: #3548cf;">"C-x c"</span>))

  (define-key helm-map (kbd <span style="color: #3548cf;">"&lt;tab&gt;"</span>) 'helm-execute-persistent-action) <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">rebind tab to run persistent action</span>
  (define-key helm-map (kbd <span style="color: #3548cf;">"C-i"</span>) 'helm-execute-persistent-action) <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">make TAB work in terminal</span>
  (define-key helm-map (kbd <span style="color: #3548cf;">"C-z"</span>)  'helm-select-action) <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">list actions using C-z</span>


  (<span style="color: #531ab6;">when</span> (executable-find <span style="color: #3548cf;">"curl"</span>)
    (<span style="color: #531ab6;">setq</span> helm-google-suggest-use-curl-p t))

  <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">open helm buffer inside current window, not occupy whole other window</span>
  (<span style="color: #531ab6;">setq</span> helm-split-window-in-side-p           t
        <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">move to end or beginning of source when reaching top or bottom of source.</span>
        helm-move-to-line-cycle-in-source     t
        <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">search for library in `</span><span style="color: #0000b0; font-style: italic;">require</span><span style="color: #595959; font-style: italic;">' and `</span><span style="color: #0000b0; font-style: italic;">declare-function</span><span style="color: #595959; font-style: italic;">' sexp.</span>
        helm-ff-search-library-in-sexp        t
        <span style="color: #595959; font-style: italic;">; </span><span style="color: #595959; font-style: italic;">scroll 8 lines other window using M-&lt;next&gt;/M-&lt;prior&gt;</span>
        helm-scroll-amount                    8
        helm-ff-file-name-history-use-recentf t
        helm-echo-input-in-header-line t)

  (<span style="color: #531ab6;">defun</span> <span style="color: #721045;">spacemacs//helm-hide-minibuffer-maybe</span> ()
    <span style="color: #2a5045; font-style: italic;">"Hide minibuffer in Helm session if we use the header line as input field."</span>
    (<span style="color: #531ab6;">when</span> (with-helm-buffer helm-echo-input-in-header-line)
      (<span style="color: #531ab6;">let</span> ((ov (make-overlay (point-min) (point-max) nil nil t)))
        (overlay-put ov 'window (selected-window))
        (overlay-put ov 'face
                     (<span style="color: #531ab6;">let</span> ((bg-color (face-background 'default nil)))
                       `(<span style="color: #8f0075;">:background</span> ,bg-color <span style="color: #8f0075;">:foreground</span> ,bg-color)))
        (<span style="color: #531ab6;">setq-local</span> cursor-type nil))))

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(when (executable-find "ack-grep")</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq helm-grep-default-command "ack-grep -Hn --no-group --no-color %e %p %f"</span>
  <span style="color: #595959; font-style: italic;">;;       </span><span style="color: #595959; font-style: italic;">helm-grep-default-recurse-command "ack-grep -H --no-group --no-color %e %p %f"))</span>

  (add-to-list 'helm-sources-using-default-as-input 'helm-source-man-pages)

  (add-hook 'helm-minibuffer-set-up-hook
            'spacemacs//helm-hide-minibuffer-maybe)

  (<span style="color: #531ab6;">setq</span> helm-autoresize-max-height 0)
  (<span style="color: #531ab6;">setq</span> helm-autoresize-min-height 40)
  (helm-autoresize-mode 1)



  (<span style="color: #531ab6;">setq</span> helm-completion-style 'helm)
  (<span style="color: #531ab6;">setq</span> helm-M-x-fuzzy-match t)
  (<span style="color: #531ab6;">setq</span> helm-apropos-fuzzy-match t)
  (<span style="color: #531ab6;">setq</span> helm-lisp-fuzzy-completion t)
  (helm-mode t)
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org566691c" class="outline-3">
<h3 id="org566691c"><span class="section-number-3">4.9.</span> ido</h3>
<div class="outline-text-3" id="text-4-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">ido</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">ido</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">setq</span> ido-enable-flex-matching t)
  (ido-mode t)
  <span style="color: #595959; font-style: italic;">;;</span><span style="color: #595959; font-style: italic;">(setq ido-everywhere t)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgaca3164" class="outline-3">
<h3 id="orgaca3164"><span class="section-number-3">4.10.</span> Avy</h3>
<div class="outline-text-3" id="text-4-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">avy</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:config</span>
  (avy-setup-default)
  <span style="color: #8f0075;">:bind</span>
  ((<span style="color: #3548cf;">"C-:"</span> . avy-goto-char)
   (<span style="color: #3548cf;">"C-'"</span> . avy-goto-char-2)
   (<span style="color: #3548cf;">"M-g f"</span> . avy-goto-line)
   (<span style="color: #3548cf;">"M-g w"</span> . avy-goto-word-1)
   (<span style="color: #3548cf;">"M-g e"</span> . avy-goto-word-0)
   (<span style="color: #3548cf;">"C-c C-j"</span> . avy-resume)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6a24392" class="outline-2">
<h2 id="org6a24392"><span class="section-number-2">5.</span> Knowledge management</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgaf3529e" class="outline-3">
<h3 id="orgaf3529e"><span class="section-number-3">5.1.</span> Hyperbole</h3>
<div class="outline-text-3" id="text-5-1">
<p>
I use hyperbole to control multiple aspects of emacs
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">Hyperbole</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">hyperbole</span>
  <span style="color: #8f0075;">:config</span>
  (add-to-list 'Info-directory-list (concat hyperb:dir <span style="color: #3548cf;">"man/"</span>))
  (add-to-list 'hyrolo-file-list (concat org-directory <span style="color: #3548cf;">"people.org"</span>))
  (hyperbole-mode t)
  (add-hook 'hyperbole-init-hook
            (<span style="color: #531ab6;">lambda</span> ()
              (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">org</span>)
              (<span style="color: #531ab6;">setq</span> hyrolo-file-list (append (hyrolo-initialize-file-list)
                                             (list org-directory))))))
</pre>
</div>
</div>
</div>
<div id="outline-container-org45a9603" class="outline-3">
<h3 id="org45a9603"><span class="section-number-3">5.2.</span> Org mode</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Org is the main component of knowledge management
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">Org-mode</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">org</span>
  <span style="color: #8f0075;">:init</span>
  <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">org babel support for nix</span>
  (<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">ob-nix</span>)
  <span style="color: #8f0075;">:bind</span>
  (<span style="color: #3548cf;">"C-c l"</span> . 'org-store-link)
  (<span style="color: #3548cf;">"C-c a"</span> . 'org-agenda)
  (<span style="color: #3548cf;">"C-c c"</span> . 'org-capture)
  <span style="color: #8f0075;">:hook</span> (org-mode . auto-revert-mode)
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">org-protocol</span>)
  (<span style="color: #531ab6;">setq</span> auto-revert-verbose nil)
  (<span style="color: #531ab6;">setq</span> org-directory
        <span style="color: #3548cf;">"~/Documents/org/"</span>)
  (<span style="color: #531ab6;">setq</span> org-log-done 'time)
  (<span style="color: #531ab6;">setq</span> org-agenda-files (list org-directory))
  (<span style="color: #531ab6;">setq</span> org-refile-use-outline-path 'file)
  (<span style="color: #531ab6;">setq</span> org-refile-targets '(
                             (nil <span style="color: #8f0075;">:maxlevel</span> . 5)
                             (org-agenda-files <span style="color: #8f0075;">:maxlevel</span> . 5)))
  (<span style="color: #531ab6;">setq</span> org-outline-path-complete-in-steps nil)
  (<span style="color: #531ab6;">setq</span> org-default-notes-file (concat org-directory <span style="color: #3548cf;">"notes.org"</span>))
  (<span style="color: #531ab6;">setq</span> org-capture-templates
        `((<span style="color: #3548cf;">"i"</span> <span style="color: #3548cf;">"inbox"</span> entry (file ,(concat org-directory <span style="color: #3548cf;">"inbox.org"</span>))
           <span style="color: #3548cf;">"* TODO %?"</span>)
          (<span style="color: #3548cf;">"l"</span> <span style="color: #3548cf;">"link"</span> entry (file ,(concat org-directory <span style="color: #3548cf;">"inbox.org"</span>))
           <span style="color: #3548cf;">"* TODO %(org-cliplink-capture)"</span> <span style="color: #8f0075;">:immediate-finish</span> t)
          (<span style="color: #3548cf;">"c"</span> <span style="color: #3548cf;">"org-protocol-capture"</span> entry (file ,(concat org-directory <span style="color: #3548cf;">"/inbox.org"</span>))
           <span style="color: #3548cf;">"* TODO [[%:link][%:description]]\n\n %i"</span> <span style="color: #8f0075;">:immediate-finish</span> t)
          (<span style="color: #3548cf;">"u"</span> <span style="color: #3548cf;">"URL capture from Safari"</span> entry (
                                                file+olp+datetree ,(concat org-directory <span style="color: #3548cf;">"/links.org"</span>))
           <span style="color: #3548cf;">"* %i    :safari:url:\n%U\n\n"</span>)))
  (org-babel-do-load-languages
   'org-babel-load-languages
   '((nix . t)
     (shell . t)
     (python . t)))
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">org-transclusion</span>)

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">org-noter</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">setq</span> org-noter-auto-save-last-location t))

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">org-ref</span>
  <span style="color: #8f0075;">:bind</span>
  (<span style="color: #8f0075;">:map</span> org-mode-map
        (<span style="color: #3548cf;">"C-c ]"</span> . org-ref-insert-link))
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">org-ref-arxiv</span>)
  (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">org-ref-scopus</span>)
  (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">org-ref-wos</span>)
  <span style="color: #8f0075;">:custom</span>
  <span style="color: #595959; font-style: italic;">;;  </span><span style="color: #595959; font-style: italic;">(bibtex-completion-bibliography '("~/Documents/bibliography.bib"))</span>
  (bibtex-completion-bibliography '(<span style="color: #3548cf;">"~/Documents/library/inbox.bib"</span>))
  (bibtex-completion-library-path '(<span style="color: #3548cf;">"~/Documents/library/"</span>))
  (bibtex-completion-notes-path <span style="color: #3548cf;">"~/Documents/library/notes/"</span>)
  (bibtex-completion-notes-template-multiple-files <span style="color: #3548cf;">"*${author-or-editor}, ${title}, ${journal}, (${year}) :${=type=}:</span>
<span style="color: #3548cf;"> \n\nSee [[cite:&amp;${=key=}]]\n"</span>)
  (bibtex-completion-additional-search-fields '(keywords))
  (bibtex-completion-display-formats '((article       . <span style="color: #3548cf;">"${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*}</span>
<span style="color: #3548cf;"> ${journal:40}"</span>)
                                       (inbook        . <span style="color: #3548cf;">"${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*}</span>
<span style="color: #3548cf;"> Chapter ${chapter:32}"</span>)
                                       (incollection  . <span style="color: #3548cf;">"${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*}</span>
<span style="color: #3548cf;"> ${booktitle:40}"</span>)
                                       (inproceedings . <span style="color: #3548cf;">"${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*}</span>
<span style="color: #3548cf;"> ${booktitle:40}"</span>)
                                       (t             . <span style="color: #3548cf;">"${=has-pdf=:1}${=has-note=:1} ${year:4} ${author:36} ${title:*}"</span>)))
  (bibtex-completion-pdf-open-function (<span style="color: #531ab6;">lambda</span> (fpath) (call-process <span style="color: #3548cf;">"open"</span> nil 0 nil fpath))))
</pre>
</div>
</div>
<div id="outline-container-org83790ea" class="outline-4">
<h4 id="org83790ea"><span class="section-number-4">5.2.1.</span> <span class="todo TODO">TODO</span> 3rd party importers</h4>
<div class="outline-text-4" id="text-5-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(load "other_importers.el")</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9a77618" class="outline-4">
<h4 id="org9a77618"><span class="section-number-4">5.2.2.</span> Publishing</h4>
<div class="outline-text-4" id="text-5-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">ox-publish</span>)
(<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">ox-html</span>)

(<span style="color: #531ab6;">setq</span> org-global-properties
      '((<span style="color: #3548cf;">"PUBLISH"</span> . <span style="color: #3548cf;">"yes no"</span>)))

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defun blog/org-publish-headline-filter (backend)</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">"Filter headlines based on the PUBLISH property before publishing.</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Only publish headlines with the property :PUBLISH: set to '</span><span style="color: #0000b0; font-style: italic;">yes</span><span style="color: #595959; font-style: italic;">'."</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(org-map-entries</span>
<span style="color: #595959; font-style: italic;">;;    </span><span style="color: #595959; font-style: italic;">(lambda ()</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(let ((publish (org-entry-get (point) "PUBLISH")))</span>
<span style="color: #595959; font-style: italic;">;;        </span><span style="color: #595959; font-style: italic;">(unless (and publish (string= publish "yes"))</span>
<span style="color: #595959; font-style: italic;">;;          </span><span style="color: #595959; font-style: italic;">(org-cut-subtree))))</span>
<span style="color: #595959; font-style: italic;">;;    </span><span style="color: #595959; font-style: italic;">nil 'file))</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(remove-hook 'org-export-before-processing-hook #'blog/org-publish-headline-filter)</span>

(<span style="color: #531ab6;">defun</span> <span style="color: #721045;">blog/org-publish-after-publish</span> (plist)
  <span style="color: #2a5045; font-style: italic;">"Open the browser to the published site after publishing."</span>
  (browse-url (concat <span style="color: #3548cf;">"file://"</span> (expand-file-name <span style="color: #3548cf;">"public/index.html"</span> site-dir))))

(<span style="color: #531ab6;">setq</span> org-html-head
      <span style="color: #3548cf;">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" /&gt;"</span>)
(<span style="color: #531ab6;">setq</span> org-html-validation-link nil)
(<span style="color: #531ab6;">setq</span> org-html-head-include-scripts <span style="color: #3548cf;">"&lt;script data-goatcounter=\"https://aziz.goatcounter.com/count\" async src=\"//gc.zgo.at/count.js\"&gt; &lt;/script&gt;"</span>)
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Use our own scripts</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">org-html-head-include-default-style nil ;; Use our own styles</span>
<span style="color: #595959; font-style: italic;">;;  </span><span style="color: #595959; font-style: italic;">org-html-head "&lt;link rel=\"stylesheet\" href=\"https://cdn.simplecss.org/simple.min.css\" /&gt;"</span>



(<span style="color: #531ab6;">defvar</span> <span style="color: #005e8b;">site-dir</span> <span style="color: #3548cf;">"~/Documents/org/"</span>)
(<span style="color: #531ab6;">defvar</span> <span style="color: #005e8b;">publish-dir</span> <span style="color: #3548cf;">"~/tree-3/users/aziz/blog/"</span>)

(<span style="color: #531ab6;">setq</span> org-publish-project-alist
      `((<span style="color: #3548cf;">"blog-org-files"</span>
         <span style="color: #8f0075;">:base-directory</span> ,site-dir
         <span style="color: #8f0075;">:base-extension</span> <span style="color: #3548cf;">"org"</span>
         <span style="color: #8f0075;">:publishing-directory</span> ,publish-dir
         <span style="color: #8f0075;">:recursive</span> t
         <span style="color: #8f0075;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #8f0075;">:headline-levels</span> 4
         <span style="color: #8f0075;">:auto-preamble</span> t
         <span style="color: #8f0075;">:auto-sitemap</span> t
         <span style="color: #8f0075;">:exclude</span> <span style="color: #3548cf;">".*.org"</span>
         <span style="color: #8f0075;">:include</span> (<span style="color: #3548cf;">"pkg.org"</span>)
         <span style="color: #8f0075;">:html-postamble</span> nil
         <span style="color: #8f0075;">:section-numbers</span> nil
         <span style="color: #8f0075;">:sitemap-filename</span> <span style="color: #3548cf;">"index.org"</span>
         <span style="color: #595959; font-style: italic;">;;</span><span style="color: #595959; font-style: italic;">:sitemap-sort-files 'anti-chronologically</span>
         <span style="color: #8f0075;">:sitemap-title</span> <span style="color: #3548cf;">"Site map"</span>
         <span style="color: #8f0075;">:with-author</span> t
         <span style="color: #8f0075;">:with-date</span> t
         <span style="color: #8f0075;">:with-title</span> t
         <span style="color: #8f0075;">:with-toc</span> t
         <span style="color: #8f0075;">:makeindex</span> t
         <span style="color: #8f0075;">:completion-function</span> blog/org-publish-after-publish)

        (<span style="color: #3548cf;">"blog-static"</span>
         <span style="color: #8f0075;">:base-directory</span> ,site-dir
         <span style="color: #8f0075;">:base-extension</span> <span style="color: #3548cf;">"css</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">js</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">png</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">jpg</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">gif"</span>
         <span style="color: #8f0075;">:publishing-directory</span> ,publish-dir <span style="color: #595959; font-style: italic;">;;</span><span style="color: #595959; font-style: italic;">,(concat publish-dir "html/")</span>
         <span style="color: #8f0075;">:recursive</span> t
         <span style="color: #8f0075;">:publishing-function</span> org-publish-attachment)

        (<span style="color: #3548cf;">"blog"</span> <span style="color: #8f0075;">:components</span> (<span style="color: #3548cf;">"blog-org-files"</span> <span style="color: #3548cf;">"blog-static"</span>))))


</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org16dba7a" class="outline-3">
<h3 id="org16dba7a"><span class="section-number-3">5.3.</span> Bibliography</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">bibtex</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:custom</span>
  (bibtex-autokey-year-length 4)
  (bibtex-autokey-name-year-separator <span style="color: #3548cf;">"-"</span>)
  (bibtex-autokey-year-title-separator <span style="color: #3548cf;">"-"</span>)
  (bibtex-autokey-titleword-separator <span style="color: #3548cf;">"-"</span>)
  (bibtex-autokey-titlewords 2)
  (bibtex-autokey-titlewords-stretch 1)
  (bibtex-autokey-titleword-length 5)
  <span style="color: #8f0075;">:bind</span>
  (<span style="color: #8f0075;">:map</span> bibtex-mode-map
        (<span style="color: #3548cf;">"H-b"</span> . org-ref-bibtex-hydra/body)))

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">ebib</span>
 <span style="color: #8f0075;">:after</span>
 (<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">org-ebib</span>)
 <span style="color: #8f0075;">:custom</span>
 (global-set-key (kbd <span style="color: #3548cf;">"C-c e"</span>) 'ebib)
 (<span style="color: #531ab6;">setq</span> ebib-bibtex-dialect 'biblatex) 
 (<span style="color: #531ab6;">setq</span> ebib-preload-bib-files '(<span style="color: #3548cf;">"../research/bibliography.bib"</span> <span style="color: #3548cf;">"~/Documents/bibliography.bib"</span>)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeeefb09" class="outline-2">
<h2 id="orgeeefb09"><span class="section-number-2">6.</span> Document viewers</h2>
<div class="outline-text-2" id="text-6">
<p>
**PDF
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">pdf-tools</span>)
</pre>
</div>
</div>
<div id="outline-container-orgc5cb71d" class="outline-3">
<h3 id="orgc5cb71d"><span class="section-number-3">6.1.</span> DJVU</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">djvu</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org130f7bb" class="outline-3">
<h3 id="org130f7bb"><span class="section-number-3">6.2.</span> Markdown</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">markdown-mode</span>
  <span style="color: #8f0075;">:mode</span> (<span style="color: #3548cf;">"README\\.md\\'"</span> . gfm-mode)
  <span style="color: #8f0075;">:init</span> (<span style="color: #531ab6;">setq</span> markdown-command <span style="color: #3548cf;">"multimarkdown"</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org2fa087d" class="outline-2">
<h2 id="org2fa087d"><span class="section-number-2">7.</span> Editing</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org09d0b2f" class="outline-3">
<h3 id="org09d0b2f"><span class="section-number-3">7.1.</span> Treesitter</h3>
<div class="outline-text-3" id="text-7-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">treesit-auto</span>
  <span style="color: #8f0075;">:config</span>
  (global-treesit-auto-mode))

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(dolist (mapping</span>
<span style="color: #595959; font-style: italic;">;;          </span><span style="color: #595959; font-style: italic;">'((python-mode . python-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">        (elixir-mode . elixir-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(css-mode . css-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(typescript-mode . typescript-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(js2-mode . js-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(bash-mode . bash-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(css-mode . css-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(json-mode . json-ts-mode)</span>
<span style="color: #595959; font-style: italic;">;;            </span><span style="color: #595959; font-style: italic;">(js-json-mode . json-ts-mode))))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-to-list 'major-mode-remap-alist mapping)</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq treesit-language-source-alist</span>
<span style="color: #595959; font-style: italic;">;;    </span><span style="color: #595959; font-style: italic;">'((bash "https://github.com/tree-sitter/tree-sitter-bash")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(cmake "https://github.com/uyha/tree-sitter-cmake")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(css "https://github.com/tree-sitter/tree-sitter-css")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(elisp "https://github.com/Wilfred/tree-sitter-elisp")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(go "https://github.com/tree-sitter/tree-sitter-go")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(html "https://github.com/tree-sitter/tree-sitter-html")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(javascript "https://github.com/tree-sitter/tree-sitter-javascript" "master" "src")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(json "https://github.com/tree-sitter/tree-sitter-json")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(make "https://github.com/alemuller/tree-sitter-make")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(markdown "https://github.com/ikatyang/tree-sitter-markdown")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(python "https://github.com/tree-sitter/tree-sitter-python")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(toml "https://github.com/tree-sitter/tree-sitter-toml")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(tsx "https://github.com/tree-sitter/tree-sitter-typescript" "master" "tsx/src")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(typescript "https://github.com/tree-sitter/tree-sitter-typescript" "master" "typescript/src")</span>
<span style="color: #595959; font-style: italic;">;;      </span><span style="color: #595959; font-style: italic;">(yaml "https://github.com/ikatyang/tree-sitter-yaml")))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(mapc #'treesit-install-language-grammar (mapcar #'car treesit-language-source-alist))</span>


(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">combobulate</span>
  <span style="color: #8f0075;">:straight</span> (combobulate <span style="color: #8f0075;">:type</span> git <span style="color: #8f0075;">:host</span> github <span style="color: #8f0075;">:repo</span> <span style="color: #3548cf;">"mickeynp/combobulate"</span>)
  <span style="color: #8f0075;">:preface</span>
  (<span style="color: #531ab6;">setq</span> combobulate-key-prefix <span style="color: #3548cf;">"C-c o"</span>)
  <span style="color: #8f0075;">:hook</span>
  ((python-ts-mode . combobulate-mode)
   (js-ts-mode . combobulate-mode)
   (html-ts-mode . combobulate-mode)
   (css-ts-mode . combobulate-mode)
   (yaml-ts-mode . combobulate-mode)
   (typescript-ts-mode . combobulate-mode)
   (json-ts-mode . combobulate-mode)
   (tsx-ts-mode . combobulate-mode)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6df62fe" class="outline-3">
<h3 id="org6df62fe"><span class="section-number-3">7.2.</span> Version control</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">magit</span>
  <span style="color: #8f0075;">:bind</span> (<span style="color: #3548cf;">"C-x g"</span> . magit-status)
  <span style="color: #8f0075;">:custom</span>
  (magit-define-global-key-bindings 'recommended))
</pre>
</div>
</div>
</div>
<div id="outline-container-org7131623" class="outline-3">
<h3 id="org7131623"><span class="section-number-3">7.3.</span> Navigation</h3>
<div class="outline-text-3" id="text-7-3">
</div>
<div id="outline-container-orgd8f0904" class="outline-4">
<h4 id="orgd8f0904"><span class="section-number-4">7.3.1.</span> Eglot</h4>
<div class="outline-text-4" id="text-7-3-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"> <span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">eglot</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">eglot</span>
  <span style="color: #8f0075;">:commands</span> eglot
  <span style="color: #8f0075;">:defer</span> t
  <span style="color: #8f0075;">:custom</span>
  (eglot-autoshutdown t)
  <span style="color: #8f0075;">:bind</span> (<span style="color: #8f0075;">:map</span> eglot-mode-map
              (<span style="color: #3548cf;">"C-c C-d"</span> . eldoc))
<span style="color: #595959; font-style: italic;">;;              </span><span style="color: #595959; font-style: italic;">("C-c C-e" . eglot-rename)</span>
<span style="color: #595959; font-style: italic;">;;              </span><span style="color: #595959; font-style: italic;">("C-c C-o" . python-sort-imports)</span>
<span style="color: #595959; font-style: italic;">;;              </span><span style="color: #595959; font-style: italic;">("C-c C-f" . eglot-format-buffer))</span>
  <span style="color: #8f0075;">:hook</span> ((python-ts-mode . eglot-ensure)
         (python-ts-mode . flyspell-prog-mode)
         (python-ts-mode . superword-mode)
         (python-ts-mode . hs-minor-mode)
         (python-ts-mode . (<span style="color: #531ab6;">lambda</span> () (set-fill-column 88)))
         (nix-ts-mode . eglot-ensure)
         (tex-mode . eglot-ensure)
         <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(prog-mode . (lambda ()</span>
         <span style="color: #595959; font-style: italic;">;;               </span><span style="color: #595959; font-style: italic;">(add-hook 'before-save-hook 'eglot-format nil t)))</span>
         )

  <span style="color: #8f0075;">:config</span>
  (add-to-list
   'eglot-server-programs
   '(nix-ts-mode
     . (<span style="color: #3548cf;">"nix-shell"</span> <span style="color: #3548cf;">"-p"</span> <span style="color: #3548cf;">"nixd"</span> <span style="color: #3548cf;">"--run"</span> <span style="color: #3548cf;">"nixd"</span>)))
  (add-to-list
   'eglot-server-programs
   '((elixir-ts-mode heex-ts-mode)
     <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">TODO remove elixir package from runtime shell</span>
     . (<span style="color: #3548cf;">"nix-shell"</span> <span style="color: #3548cf;">"-p"</span> <span style="color: #3548cf;">"elixir-ls"</span> <span style="color: #3548cf;">"elixir"</span> <span style="color: #3548cf;">"--run"</span> <span style="color: #3548cf;">"elixir-ls"</span>)))

  (<span style="color: #531ab6;">setq</span> read-process-output-max (* 1024 1024))
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(with-eval-after-load 'eglot</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(dolist (mode '((nix-mode . ("nixd"))))</span>
  <span style="color: #595959; font-style: italic;">;;     </span><span style="color: #595959; font-style: italic;">(add-to-list 'eglot-server-programs mode)))</span>


  (add-hook 'eglot-managed-mode-hook
          #'(<span style="color: #531ab6;">lambda</span> ()
              <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Show flymake diagnostics first.</span>
              (<span style="color: #531ab6;">setq</span> eldoc-documentation-functions
                    (cons #'flymake-eldoc-function
                          (remove #'flymake-eldoc-function
                                  eldoc-documentation-functions)))))
  (<span style="color: #531ab6;">setq-default</span> eglot-workspace-configuration '(
      (<span style="color: #8f0075;">:pylsp</span> . (<span style="color: #8f0075;">:configurationSources</span> [<span style="color: #3548cf;">"flake8"</span>] <span style="color: #8f0075;">:plugins</span> (
                 <span style="color: #8f0075;">:pycodestyle</span> (<span style="color: #8f0075;">:enabled</span> t) <span style="color: #8f0075;">:mccabe</span> (<span style="color: #8f0075;">:enabled</span> t)
                 <span style="color: #8f0075;">:pyflakes</span> (<span style="color: #8f0075;">:enabled</span> t) <span style="color: #8f0075;">:flake8</span> (<span style="color: #8f0075;">:enabled</span> t
                 <span style="color: #8f0075;">:maxLineLength</span> 88) <span style="color: #884900;">:ruff</span><span style="color: #884900;"> (</span><span style="color: #884900;">:enabled</span><span style="color: #884900;"> t </span><span style="color: #884900;">:lineLength</span><span style="color: #884900;"> 88)</span>
                 <span style="color: #8f0075;">:pydocstyle</span> (<span style="color: #8f0075;">:enabled</span> t <span style="color: #8f0075;">:convention</span> <span style="color: #3548cf;">"numpy"</span>) <span style="color: #8f0075;">:yapf</span>
                 (<span style="color: #8f0075;">:enabled</span> t) <span style="color: #8f0075;">:autopep8</span> (<span style="color: #8f0075;">:enabled</span> <span style="color: #8f0075;">:json-false</span>) <span style="color: #8f0075;">:black</span>
                 (<span style="color: #8f0075;">:enabled</span> t <span style="color: #8f0075;">:line_length</span> 88 <span style="color: #8f0075;">:cache_config</span> t))))

      (<span style="color: #8f0075;">:nixd</span>
       (<span style="color: #8f0075;">:nixpkgs</span>
        (<span style="color: #8f0075;">:expr</span> <span style="color: #3548cf;">"import &lt;nixpkgs&gt; { }"</span>))))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdcdb6cb" class="outline-4">
<h4 id="orgdcdb6cb"><span class="section-number-4">7.3.2.</span> dumb-jump</h4>
<div class="outline-text-4" id="text-7-3-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">dumb-jump</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:hook</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(('xref-backend-functions #'dumb-jump-xref-activate))</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">setq</span> dumb-jump-force-searcher 'rg)
  (add-hook 'xref-backend-functions #'dumb-jump-xref-activate)
  (<span style="color: #531ab6;">setq</span> xref-show-definitions-function 'xref-show-definitions-completing-read)
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq xref-show-definitions-function 'xref-show-definitions-buffer)</span>
  )
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf4385a0" class="outline-3">
<h3 id="orgf4385a0"><span class="section-number-3">7.4.</span> Project management</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">projectile</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">projectile</span>
<span style="color: #8f0075;">:init</span>
(projectile-mode t)
(<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">tramp</span>)
<span style="color: #8f0075;">:bind</span>
((<span style="color: #8f0075;">:map</span> projectile-mode-map
       (<span style="color: #3548cf;">"s-p"</span> . projectile-command-map))
       (<span style="color: #3548cf;">"s-p v"</span> . 'magit))

<span style="color: #8f0075;">:config</span>
(<span style="color: #531ab6;">setq</span> projectile-sort-order 'recentf)
(<span style="color: #531ab6;">setq</span> projectile-git-use-fd t)
(<span style="color: #531ab6;">setq</span> projectile-enable-caching t)
(<span style="color: #531ab6;">setq</span> projectile-completion-system 'helm)
(<span style="color: #531ab6;">setq</span> projectile-switch-project-action 'helm-projectile)
(advice-add 'projectile-project-root <span style="color: #8f0075;">:before-while</span>
            (<span style="color: #531ab6;">lambda</span> (<span style="color: #005f5f;">&amp;optional</span> dir)
              (not (file-remote-p (<span style="color: #531ab6;">or</span> dir default-directory)))))
(add-to-list 'projectile-other-file-alist '(<span style="color: #3548cf;">"ex"</span> . (<span style="color: #3548cf;">"html.heex"</span> <span style="color: #3548cf;">"html.leex"</span>)))
(add-to-list 'projectile-other-file-alist '(<span style="color: #3548cf;">"html.heex"</span> . (<span style="color: #3548cf;">"ex"</span>)))
(add-to-list 'projectile-other-file-alist '(<span style="color: #3548cf;">"html.leex"</span> . (<span style="color: #3548cf;">"ex"</span>)))
)
</pre>
</div>
</div>
</div>
<div id="outline-container-org3a06f5c" class="outline-3">
<h3 id="org3a06f5c"><span class="section-number-3">7.5.</span> Programming languages</h3>
<div class="outline-text-3" id="text-7-5">
</div>
<div id="outline-container-org8cd2cc8" class="outline-4">
<h4 id="org8cd2cc8"><span class="section-number-4">7.5.1.</span> Elixir</h4>
<div class="outline-text-4" id="text-7-5-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">elixir-mode</span>)
</pre>
</div>
</div>
</div>
<div id="outline-container-org53b5f57" class="outline-4">
<h4 id="org53b5f57"><span class="section-number-4">7.5.2.</span> Nix</h4>
<div class="outline-text-4" id="text-7-5-2">
<p>
<a href="https://github.com/NixOS/nix-mode?tab=readme-ov-filelsp">https://github.com/NixOS/nix-mode?tab=readme-ov-filelsp</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Nix</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">nix-mode</span>
  <span style="color: #8f0075;">:mode</span> (<span style="color: #3548cf;">"\\.nix\\'"</span> <span style="color: #3548cf;">"\\.nix.in\\'"</span>)
  <span style="color: #8f0075;">:config</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(use-package nix-drv-mode</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:ensure nix-mode</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:mode "\\.drv\\'")</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(use-package nix-shell</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:ensure nix-mode</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:commands (nix-shell-unpack nix-shell-configure nix-shell-build))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(use-package nix-repl</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:ensure nix-mode</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:commands (nix-repl))</span>
  )
</pre>
</div>
</div>
</div>
<div id="outline-container-org74967d9" class="outline-4">
<h4 id="org74967d9"><span class="section-number-4">7.5.3.</span> Terraform</h4>
<div class="outline-text-4" id="text-7-5-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">terraform-mode</span>
 <span style="color: #8f0075;">:custom</span> (terraform-indent-level 4)
 <span style="color: #8f0075;">:config</span>
 (<span style="color: #531ab6;">defun</span> <span style="color: #721045;">my-terraform-mode-init</span> ()
   <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">if you want to use outline-minor-mode</span>
   <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(outline-minor-mode 1)</span>
   )
 (add-hook 'terraform-mode-hook 'my-terraform-mode-init))
</pre>
</div>
</div>
</div>
<div id="outline-container-org46ea4da" class="outline-4">
<h4 id="org46ea4da"><span class="section-number-4">7.5.4.</span> Typescript</h4>
<div class="outline-text-4" id="text-7-5-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #3548cf;">"\\.ts</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">x</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">?\\'"</span> . tsx-ts-mode))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgdcaaa55" class="outline-3">
<h3 id="orgdcaaa55"><span class="section-number-3">7.6.</span> Snippets</h3>
<div class="outline-text-3" id="text-7-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">yasnippet</span>
  <span style="color: #8f0075;">:config</span>
  (yas-global-mode 1)
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">get more snippets from here</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">https://github.com/AndreaCrotti/yasnippet-snippets/tree/master/snippets</span>
  (<span style="color: #531ab6;">setq</span> yas-snippet-dirs
      '(<span style="color: #3548cf;">"~/.emacs.d/snippets"</span>)))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8c76c8b" class="outline-2">
<h2 id="org8c76c8b"><span class="section-number-2">8.</span> Misc</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-orgbce0b54" class="outline-3">
<h3 id="orgbce0b54"><span class="section-number-3">8.1.</span> Slurm</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">slurm-mode</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">require</span> '<span style="color: #0000b0;">slurm-script-mode</span>))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org3956fb7" class="outline-2">
<h2 id="org3956fb7"><span class="section-number-2">9.</span> Rest</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">  (<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">auto-compile</span>
    <span style="color: #8f0075;">:straight</span> t
    <span style="color: #8f0075;">:demand</span> t
    <span style="color: #8f0075;">:custom</span>
    (auto-compile-mode-line-counter t <span style="color: #3548cf;">"Show compile info in the mode-line"</span>)
    (auto-compile-source-recreate-deletes-dest t)
    (auto-compile-toggle-deletes-nonlib-dest t)
    (auto-compile-update-autoloads t)
    (auto-compile-display-buffer nil <span style="color: #3548cf;">"Don't display compile buffer"</span>)
    <span style="color: #8f0075;">:hook</span>
    (auto-compile-inhibit-compile . auto-compile-inhibit-compile-detached-git-head)
    <span style="color: #8f0075;">:config</span>
    (auto-compile-on-load-mode)
    (auto-compile-on-save-mode))

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">no-littering</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:demand</span> t)



<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;; Load use packages</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(eval-and-compile</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(defsubst emacs-path (path)</span>
<span style="color: #595959; font-style: italic;">;;     </span><span style="color: #595959; font-style: italic;">(expand-file-name path user-emacs-directory))</span>

<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(setq package-enable-at-startup nil</span>
<span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">load-path</span>
<span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(append (list (emacs-path "use-package"))</span>
<span style="color: #595959; font-style: italic;">;;                 </span><span style="color: #595959; font-style: italic;">(delete-dups load-path)</span>
<span style="color: #595959; font-style: italic;">;;                 </span><span style="color: #595959; font-style: italic;">(list (emacs-path "lisp")))))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(require 'use-package)</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;; Set use-package to always ensure packages are installed</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(setq use-package-always-ensure t)</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;; (setq use-package-verbose init-file-debug</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;;       use-package-expand-minimally (not init-file-debug)</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;;       use-package-compute-statistics t</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;;       debug-on-error init-file-debug)</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">;; Define the &#8220;data environment&#8221; for this instance of Emacs</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defconst emacs-environment (or (getenv "NIX_MYENV_NAME") "default"))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defconst emacs-data-suffix</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(cond ((string= "emacsERC" emacs-environment) "alt")</span>
<span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">((string-match "emacs2[6789]\\(.+\\)$" emacs-environment)</span>
<span style="color: #595959; font-style: italic;">;;          </span><span style="color: #595959; font-style: italic;">(match-string 1 emacs-environment))))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defconst alternate-emacs (string= emacs-data-suffix "alt"))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defconst user-data-directory</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(emacs-path (if emacs-data-suffix</span>
<span style="color: #595959; font-style: italic;">;;                   </span><span style="color: #595959; font-style: italic;">(format "data-%s" emacs-da&#17;&#24;ta-suffix)</span>
<span style="color: #595959; font-style: italic;">;;                 </span><span style="color: #595959; font-style: italic;">"data")))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defun user-data (</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(expand-file-name dir user-data-directory)))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Font setup</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">https://slumpy.org/blog/2016-01-11-proper-way-to-setup-fonts-in-emacs/</span>


(<span style="color: #531ab6;">defun</span> <span style="color: #721045;">my/setup-fonts</span> ()
  (<span style="color: #531ab6;">interactive</span>)
  (set-face-font 'default <span style="color: #3548cf;">"Berkeley Mono-15"</span>)
  (set-fontset-font t 'hebrew (font-spec <span style="color: #8f0075;">:name</span> <span style="color: #3548cf;">"Berkeley Mono-15"</span>))
)


<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-to-list 'default-frame-alist '(font . "Berkeley Mono" ))</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(set-face-attribute 'default t :font "Berkeley Mono")</span>



<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(use-package package</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:custom</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(setq package-archives '(("melpa-stable" . "https://stable.melpa.org/packages/")</span>
<span style="color: #595959; font-style: italic;">;;                          </span><span style="color: #595959; font-style: italic;">("melpa" . "https://melpa.org/packages/")</span>
<span style="color: #595959; font-style: italic;">;;                          </span><span style="color: #595959; font-style: italic;">("gnu" . "http://elpa.gnu.org/packages/")</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">                      ("org" . "http://orgmode.org/elpa/")))</span>

<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(defun validate-package-urls (urls)</span>
<span style="color: #595959; font-style: italic;">;;     </span><span style="color: #595959; font-style: italic;">"Validate the given package repository URLs."</span>
<span style="color: #595959; font-style: italic;">;;     </span><span style="color: #595959; font-style: italic;">(dolist (url urls)</span>
<span style="color: #595959; font-style: italic;">;;       </span><span style="color: #595959; font-style: italic;">(unless (string-match "\\`https?:" (cdr url))</span>
<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">     (error "Invalid URL: %s" (cdr url)))))</span>

<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(validate-package-urls package-archives)</span>

<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(package-initialize))</span>



(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">imenu</span>
  <span style="color: #8f0075;">:config</span>
  (<span style="color: #531ab6;">setq</span> imenu-auto-rescan t)
  (add-hook 'emacs-lisp-mode-hook
            (<span style="color: #531ab6;">lambda</span> ()
              (<span style="color: #531ab6;">setq</span> imenu-generic-expression
                    '((nil <span style="color: #3548cf;">"^\\s-*(use-package\\s-+</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">\\_&lt;.+?\\_&gt;</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span> 1))))))

<span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">ibuffer</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">ibuffer</span>
  <span style="color: #8f0075;">:bind</span> (<span style="color: #3548cf;">"C-x C-b"</span> . ibuffer)
  <span style="color: #8f0075;">:custom</span>
  (ibuffer-default-display-maybe-show-predicates t)
  (ibuffer-expert t)
  (ibuffer-formats
   '((mark modified read-only <span style="color: #3548cf;">" "</span>
           (name 16 -1)
           <span style="color: #3548cf;">" "</span>
           (size 6 -1 <span style="color: #8f0075;">:right</span>)
           <span style="color: #3548cf;">" "</span>
           (mode 16 16)
           <span style="color: #3548cf;">" "</span> filename)
     (mark <span style="color: #3548cf;">" "</span>
           (name 16 -1)
           <span style="color: #3548cf;">" "</span> filename)))
  (ibuffer-maybe-show-regexps nil)
  (ibuffer-saved-filter-groups
   '((<span style="color: #3548cf;">"default"</span>
      (<span style="color: #3548cf;">"Magit"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . magit-status-mode)
        (mode . magit-log-mode)
        (name . <span style="color: #3548cf;">"\\*magit"</span>)
        (name . <span style="color: #3548cf;">"magit-"</span>)
        (name . <span style="color: #3548cf;">"git-monitor"</span>)))
      (<span style="color: #3548cf;">"Coq"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . coq-mode)
        (name . <span style="color: #3548cf;">"\\&lt;</span><span style="color: #005e8b;">coq\\</span><span style="color: #3548cf;">&gt;"</span>)
        (name . <span style="color: #3548cf;">"_CoqProject"</span>)))
      (<span style="color: #3548cf;">"Commands"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . shell-mode)
        (mode . eshell-mode)
        (mode . term-mode)
        (mode . compilation-mode)))
      (<span style="color: #3548cf;">"Haskell"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . haskell-mode)
        (mode . haskell-cabal-mode)
        (mode . haskell-literate-mode)))
      (<span style="color: #3548cf;">"Rust"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . rust-mode)
        (mode . cargo-mode)
        (name . <span style="color: #3548cf;">"\\*Cargo"</span>)
        (name . <span style="color: #3548cf;">"^\\*rls</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">::stderr</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">?\\*"</span>)
        (name . <span style="color: #3548cf;">"eglot"</span>)))
      (<span style="color: #3548cf;">"Nix"</span>
       (mode . nix-mode))
      (<span style="color: #3548cf;">"C++"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . c-mode)
        (mode . c++-mode)))
      (<span style="color: #3548cf;">"Lisp"</span>
       (mode . emacs-lisp-mode))
      (<span style="color: #3548cf;">"Dired"</span>
       (mode . dired-mode))
      (<span style="color: #3548cf;">"Gnus"</span>
       (<span style="color: #531ab6;">or</span>
        (mode . message-mode)
        (mode . mail-mode)
        (mode . gnus-group-mode)
        (mode . gnus-summary-mode)
        (mode . gnus-article-mode)
        (name . <span style="color: #3548cf;">"^\\.newsrc-dribble"</span>)
        (name . <span style="color: #3548cf;">"^\\*</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">sent</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">unsent</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">fetch</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span>)
        (name . <span style="color: #3548cf;">"^ \\*</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">nnimap</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">nntp</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">nnmail</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">gnus</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">server</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">mm\\*</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span>)
        (name . <span style="color: #3548cf;">"</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">Original Article</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">canonical address</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">extract address</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span>)))
      (<span style="color: #3548cf;">"Org"</span>
       (<span style="color: #531ab6;">or</span>
        (name . <span style="color: #3548cf;">"^\\*Calendar\\*$"</span>)
        (name . <span style="color: #3548cf;">"^\\*Org Agenda"</span>)
        (name . <span style="color: #3548cf;">"^ \\*Agenda"</span>)
        (name . <span style="color: #3548cf;">"^diary$"</span>)
        (mode . org-mode)))
      (<span style="color: #3548cf;">"Emacs"</span>
       (<span style="color: #531ab6;">or</span>
        (name . <span style="color: #3548cf;">"^\\*scratch\\*$"</span>)
        (name . <span style="color: #3548cf;">"^\\*Messages\\*$"</span>)
        (name . <span style="color: #3548cf;">"^\\*</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">Customize</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">Help</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span>)
        (name . <span style="color: #3548cf;">"\\*</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">Echo</span><span style="color: #721045;">\\</span><span style="color: #00663f;">|</span><span style="color: #3548cf;">Minibuf</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span>))))))
  (ibuffer-show-empty-filter-groups nil)
  (ibuffer-shrink-to-minimum-size t t)
  (ibuffer-use-other-window t)
  <span style="color: #8f0075;">:init</span>
  (add-hook 'ibuffer-mode-hook
            #'(<span style="color: #531ab6;">lambda</span> ()
                (ibuffer-switch-to-saved-filter-groups <span style="color: #3548cf;">"default"</span>))))

(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">dired</span>
  <span style="color: #8f0075;">:straight</span> nil
  <span style="color: #8f0075;">:ensure</span> nil
  <span style="color: #8f0075;">:config</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(when (string= system-type "darwin")</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(setq dired-use-ls-dired t</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">insert-directory-program "/usr/local/bin/gls"</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">dired-listing-switches "-aBhl --group-directories-first")))</span>
)
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">dired-x</span>
  <span style="color: #8f0075;">:straight</span> nil
  <span style="color: #8f0075;">:ensure</span> nil
  <span style="color: #8f0075;">:after</span> dired
  <span style="color: #8f0075;">:config</span>
  (add-hook 'dired-mode-hook #'dired-omit-mode))

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Project management</span>
<span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">projectile</span>



<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Terminal emulator</span>
<span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">vterm</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">vterm</span>
  <span style="color: #8f0075;">:disabled</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:defer</span> t)



<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Manuals and Docs</span>
<span style="color: #595959; font-style: italic;">;;;; </span><span style="color: #595959; font-style: italic;">info TODO: read and refactor</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">info</span>
  <span style="color: #8f0075;">:bind</span> (<span style="color: #3548cf;">"C-h C-i"</span> . info-hlookup-symbol)
  <span style="color: #8f0075;">:custom</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(Info-default-directory-list (list (emacs-path "lisp/org-mode/doc")))</span>
  (Info-fit-frame-flag nil)
  <span style="color: #8f0075;">:autoload</span> Info-goto-node
  <span style="color: #8f0075;">:preface</span>
  (<span style="color: #531ab6;">eval-when-compile</span>
    (<span style="color: #531ab6;">defvar</span> <span style="color: #005e8b;">buffer-face-mode-face</span>))

  (<span style="color: #531ab6;">defun</span> <span style="color: #721045;">nix-read-environment</span> (name)
    (<span style="color: #531ab6;">ignore-errors</span>
      (<span style="color: #531ab6;">with-temp-buffer</span>
        (insert-file-contents-literally
         (<span style="color: #531ab6;">with-temp-buffer</span>
           (insert-file-contents-literally
            (executable-find (concat <span style="color: #3548cf;">"load-env-"</span> name)))
           (<span style="color: #531ab6;">and</span> (re-search-forward <span style="color: #3548cf;">"^source </span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">.+</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">$"</span> nil t)
                (match-string 1))))
        (<span style="color: #531ab6;">and</span> (<span style="color: #531ab6;">or</span> (re-search-forward <span style="color: #3548cf;">"^  nativeBuildInputs=\"</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">.+?</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">\""</span> nil t)
                 (re-search-forward <span style="color: #3548cf;">"^  buildInputs=\"</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">.+?</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">\""</span> nil t))
             (split-string (match-string 1))))))
  <span style="color: #8f0075;">:init</span>
  (<span style="color: #531ab6;">defvar</span> <span style="color: #005e8b;">Info-directory-list</span>
    (mapcar 'expand-file-name
            (append
             (mapcar (apply-partially #'expand-file-name <span style="color: #3548cf;">"share/info"</span>)
                     (nix-read-environment emacs-environment))
             '(<span style="color: #3548cf;">"~/.local/share/info"</span>
               <span style="color: #3548cf;">"~/.nix-profile/share/info"</span>
               <span style="color: #3548cf;">"/etc/profiles/per-user/aziz/share/info/"</span>
               <span style="color: #3548cf;">"/run/current-system/sw/share/info/"</span>
               ))))
  <span style="color: #8f0075;">:config</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-hook 'Info-mode-hook</span>
  <span style="color: #595959; font-style: italic;">;;           </span><span style="color: #595959; font-style: italic;">#'(lambda ()</span>
  <span style="color: #595959; font-style: italic;">;;                </span><span style="color: #595959; font-style: italic;">(setq buffer-face-mode-face '(:family "Arial"))</span>
  <span style="color: #595959; font-style: italic;">;;                </span><span style="color: #595959; font-style: italic;">(buffer-face-mode)</span>
  <span style="color: #595959; font-style: italic;">;;                </span><span style="color: #595959; font-style: italic;">(text-scale-adjust 1)</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">           ))</span>
)


(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">info-look</span> <span style="color: #8f0075;">:autoload</span> info-lookup-add-help)

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(use-package info-lookmore</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:enable nil</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:after info-look</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:config</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(info-lookmore-elisp-cl)</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(info-lookmore-elisp-userlast)</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(info-lookmore-elisp-gnus)</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(info-lookmore-apropos-elisp))</span>



<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Auctex</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">auctex</span>
  <span style="color: #8f0075;">:straight</span> t)
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">tex</span>
  <span style="color: #8f0075;">:straight</span> nil
  <span style="color: #8f0075;">:ensure</span> auctex
  <span style="color: #8f0075;">:defer</span> t
 <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">:mode ("\\.tex\\'" . LaTeX-mode)</span>
  <span style="color: #8f0075;">:hook</span> ((LaTeX-mode . TeX-source-correlate-mode)
         (LaTeX-mode . TeX-PDF-mode)
         (LaTeX-mode . turn-on-reftex)
         (LaTeX-mode . abbrev-mode))
  <span style="color: #8f0075;">:custom</span>
  (TeX-PDF-mode t)
  (TeX-auto-save t)
  (TeX-auto-untabify t)
  (TeX-electric-escape t)
  (TeX-electric-math '(<span style="color: #3548cf;">"</span><span style="color: #721045;">\\</span><span style="color: #00663f;">(</span><span style="color: #3548cf;">"</span> . <span style="color: #3548cf;">"</span><span style="color: #721045;">\\</span><span style="color: #00663f;">)</span><span style="color: #3548cf;">"</span>))
  (TeX-engine 'xetex)
  (TeX-parse-self t)
  (TeX-master nil)
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Eglot keybindings interferes with auctex</span>
  (<span style="color: #531ab6;">with-eval-after-load</span> 'eglot
    (define-key eglot-mode-map (kbd <span style="color: #3548cf;">"C-c C-e"</span>) nil)
  <span style="color: #8f0075;">:config</span>
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Set Skim as the PDF viewer</span>
  (<span style="color: #531ab6;">setq</span> TeX-view-program-list
        '((<span style="color: #3548cf;">"Skim"</span> <span style="color: #3548cf;">"open -a Skim.app %o"</span>)))
  (<span style="color: #531ab6;">setq</span> TeX-view-program-selection
        '((output-pdf <span style="color: #3548cf;">"Skim"</span>)
          ((output-dvi style-pstricks)
           <span style="color: #3548cf;">"dvips and gv"</span>)
          (output-dvi <span style="color: #3548cf;">"xdvi"</span>)
          (output-html <span style="color: #3548cf;">"open"</span>)))
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Configure Skim to auto-reload PDF files</span>
  (<span style="color: #531ab6;">setq</span> TeX-source-correlate-mode t)
  (<span style="color: #531ab6;">setq</span> TeX-source-correlate-start-server t)
  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">Sync TeX source with Skim</span>
  (add-hook 'TeX-after-compilation-finished-functions
            #'TeX-revert-document-buffer)))


<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:defines</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(latex-help-cmd-alist</span>
<span style="color: #595959; font-style: italic;">;;    </span><span style="color: #595959; font-style: italic;">latex-help-file)</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:preface</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(defvar latex-prettify-symbols-alist</span>
<span style="color: #595959; font-style: italic;">;;     </span><span style="color: #595959; font-style: italic;">'(("\N{THIN SPACE}" . ?\&#10231;)))</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">:config</span>
<span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(require 'preview)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(defun latex-help-get-cmd-alist ()    ;corrected version:</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">"Scoop up the commands in the index of the latex info manual.</span>
  <span style="color: #595959; font-style: italic;">;;  </span><span style="color: #595959; font-style: italic;">The values are saved in `</span><span style="color: #0000b0; font-style: italic;">latex-help-cmd-alist</span><span style="color: #595959; font-style: italic;">' for speed."</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">;; mm, does it contain any cached entries</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">(if (not (assoc "\\begin" latex-help-cmd-alist))</span>
  <span style="color: #595959; font-style: italic;">;;       </span><span style="color: #595959; font-style: italic;">(save-window-excursion</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(setq latex-help-cmd-alist nil)</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(Info-goto-node (concat latex-help-file "Command Index"))</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(goto-char (point-max))</span>
  <span style="color: #595959; font-style: italic;">;;         </span><span style="color: #595959; font-style: italic;">(while (re-search-backward "^\\* \\(.+\\): *\\(.+\\)\\." nil t)</span>
  <span style="color: #595959; font-style: italic;">;;           </span><span style="color: #595959; font-style: italic;">(let ((key (buffer-substring (match-beginning 1) (match-end 1)))</span>
  <span style="color: #595959; font-style: italic;">;;                 </span><span style="color: #595959; font-style: italic;">(value (buffer-substring (match-beginning 2)</span>
  <span style="color: #595959; font-style: italic;">;;                                          </span><span style="color: #595959; font-style: italic;">(match-end 2))))</span>
  <span style="color: #595959; font-style: italic;">;;             </span><span style="color: #595959; font-style: italic;">(add-to-list 'latex-help-cmd-alist (cons key value))))))</span>
  <span style="color: #595959; font-style: italic;">;;   </span><span style="color: #595959; font-style: italic;">latex-help-cmd-alist)</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(info-lookup-add-help :mode 'LaTeX-mode</span>
  <span style="color: #595959; font-style: italic;">;;                       </span><span style="color: #595959; font-style: italic;">:regexp ".*"</span>
  <span style="color: #595959; font-style: italic;">;;                       </span><span style="color: #595959; font-style: italic;">:parse-rule "\\\\?[a-zA-Z]+\\|\\\\[</span><span style="color: #0000b0; font-style: italic;">^</span><span style="color: #0000b0; font-style: italic;">a-zA-Z</span><span style="color: #595959; font-style: italic;">]"</span>
  <span style="color: #595959; font-style: italic;">;;                       </span><span style="color: #595959; font-style: italic;">:doc-spec '(("(latex2e)Concept Index")</span>
  <span style="color: #595959; font-style: italic;">;;                                   </span><span style="color: #595959; font-style: italic;">("(latex2e)Command Index")))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-hook 'LaTeX-mode-hook</span>
  <span style="color: #595959; font-style: italic;">;;           </span><span style="color: #595959; font-style: italic;">#'(lambda</span>
  <span style="color: #595959; font-style: italic;">;;               </span><span style="color: #595959; font-style: italic;">()</span>
  <span style="color: #595959; font-style: italic;">;;               </span><span style="color: #595959; font-style: italic;">(setq-local prettify-symbols-alist latex-prettify-symbols-alist)</span>
  <span style="color: #595959; font-style: italic;">;;               </span><span style="color: #595959; font-style: italic;">(prettify-symbols-mode 1)))</span>

  <span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">(add-hook 'TeX-after-compilation-finished-functions</span>
  <span style="color: #595959; font-style: italic;">;;           </span><span style="color: #595959; font-style: italic;">#'TeX-revert-document-buffer))</span>

<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">My packages</span>
(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">capture-frame</span>
  <span style="color: #8f0075;">:disabled</span>
  <span style="color: #8f0075;">:load-path</span> <span style="color: #3548cf;">"./capture-frame.el"</span>
  <span style="color: #8f0075;">:commands</span> (my/make-capture-frame))


(<span style="color: #531ab6;">use-package</span> <span style="color: #0000b0;">exec-path-from-shell</span>
  <span style="color: #8f0075;">:straight</span> t
  <span style="color: #8f0075;">:config</span>
  (exec-path-from-shell-initialize)
  (<span style="color: #531ab6;">dolist</span> (var '(<span style="color: #3548cf;">"SSH_AUTH_SOCK"</span> <span style="color: #3548cf;">"SSH_AGENT_PID"</span> <span style="color: #3548cf;">"GPG_AGENT_INFO"</span> <span style="color: #3548cf;">"LANG"</span> <span style="color: #3548cf;">"LC_CTYPE"</span> <span style="color: #3548cf;">"NIX_SSL_CERT_FILE"</span> <span style="color: #3548cf;">"NIX_PATH"</span>))
    (add-to-list 'exec-path-from-shell-variables var))
  (exec-path-from-shell-copy-env <span style="color: #3548cf;">"PATH"</span>))



<span style="color: #595959; font-style: italic;">;; </span><span style="color: #595959; font-style: italic;">this issue pr fix the issue with tramp</span>

(<span style="color: #531ab6;">defun</span> <span style="color: #721045;">my/projectile-remove-selected-projects</span> ()
  <span style="color: #2a5045; font-style: italic;">"Select and remove multiple projects from the known projects list."</span>
  (<span style="color: #531ab6;">interactive</span>)
  (<span style="color: #531ab6;">let*</span> ((projects (projectile-relevant-known-projects))
         (selected (completing-read-multiple <span style="color: #3548cf;">"Select projects to remove: "</span> projects)))
    (<span style="color: #531ab6;">dolist</span> (project selected)
      (projectile-remove-known-project project))
    (message <span style="color: #3548cf;">"Removed projects: %s"</span> (string-join selected <span style="color: #3548cf;">", "</span>))))


</pre>
</div>
</div>
</div>
</div>
</body>
</html>
